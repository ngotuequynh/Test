/**
 * Drop snippet UI module.
 *
 * @copyright  2016 Frédéric Massart - FMCorz.net
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_stash/drop-snippet-ui",["jquery"],(function($){function UI(maker,container){this._container=$(container),this._maker=maker,this._init()}return UI.prototype._container=null,UI.prototype._appearanceNode=null,UI.prototype._labelNode=null,UI.prototype._actionTextNode=null,UI.prototype._previewNode=null,UI.prototype._actionTextNode=null,UI.prototype._snippetNode=null,UI.prototype._actionTextZoneNode=null,UI.prototype._labelZoneNode=null,UI.prototype._init=function(){this._appearanceNode=this.find("[name=displaytype]"),this._labelNode=this.find("[name=label]"),this._actionTextNode=this.find("[name=actiontext]"),this._snippetNode=this.find('[name="snippet"]'),this._previewNode=this.find(".preview"),this._labelZoneNode=this.find(".snippet-label"),this._actionTextZoneNode=this.find(".snippet-actiontext"),this._labelNode.attr("placeholder",this._maker.getDefaultLabel()),this._actionTextNode.attr("placeholder",this._maker.getDefaultActionText()),this._maker.setLabel(this._labelNode.val()),this._maker.setDisplayType(this._appearanceNode.val()),this._maker.setActionText(this._actionTextNode.val()),this._updateForm(),this._setListeners(),this.update()},UI.prototype.find=function(selector){return this._container.find(selector)},UI.prototype._setListeners=function(){this._appearanceNode.change(function(e){this._maker.setDisplayType($(e.currentTarget).val()),this._updateForm(),this.update()}.bind(this)),this._labelNode.on("keyup",function(e){this._maker.setLabel($(e.currentTarget).val()),this._updateForm(),this.update()}.bind(this)),this._actionTextNode.on("keyup",function(e){this._maker.setActionText($(e.currentTarget).val()),this._updateForm(),this.update()}.bind(this))},UI.prototype.update=function(){var display=this._maker.getDisplay();display.find("a, input").click((function(e){e.preventDefault()})),this._snippetNode.val(this._maker.getSnippet()),this._previewNode.html(display)},UI.prototype._updateForm=function(){var appearance=this._appearanceNode.val();appearance==this._maker.IMAGEANDBUTTON?(this._labelZoneNode.hide(),this._actionTextZoneNode.show()):appearance==this._maker.TEXT?(this._labelZoneNode.show(),this._actionTextZoneNode.hide()):(this._labelZoneNode.hide(),this._actionTextZoneNode.hide())},UI}));

//# sourceMappingURL=drop-snippet-ui.min.js.map