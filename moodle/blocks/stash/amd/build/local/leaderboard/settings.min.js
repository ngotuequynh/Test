define("block_stash/local/leaderboard/settings",["exports","core/toast","core/ajax","core/str"],(function(_exports,_toast,_ajax,_str){var obj;
/**
   * Leaderboard settings JavaScript
   *
   * @copyright 2023 Adrian Greeve <adriangreeve.com>
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{document.querySelector(".block-stash-lbsetting").addEventListener("change",(e=>{let currenttarget=e.currentTarget;updateSetting(currenttarget.dataset.courseid,"leaderboard",currenttarget.checked).then((result=>{result&&(0,_toast.add)((0,_str.get_string)("settingupdated","block_stash"),{type:"info",autohide:!0,closeButton:!0})}));let mainboards=document.querySelector(".block_stash_lb_cards");currenttarget.checked?mainboards.classList.remove("invisible"):mainboards.classList.add("invisible")})),document.querySelector(".block-stash-lbgroups").addEventListener("change",(e=>{let currenttarget=e.currentTarget;updateSetting(currenttarget.dataset.courseid,"leaderboard_groups",currenttarget.checked).then((result=>{result&&(0,_toast.add)((0,_str.get_string)("settingupdated","block_stash"),{type:"info",autohide:!0,closeButton:!0})}))})),document.querySelectorAll(".block_stash-leaderboard").forEach((board=>{board.addEventListener("change",(e=>{let otherboardelement=e.currentTarget,enabled=otherboardelement.checked,boardlimit=otherboardelement.parentNode.parentNode.querySelector(".block_stash-leaderboard-limit");enabled?boardlimit.removeAttribute("disabled"):boardlimit.setAttribute("disabled",!0);const options=otherboardelement.parentNode.parentNode.querySelector('input[type="hidden"]').dataset.options;updateLeaderboard(otherboardelement.dataset.courseid,otherboardelement.dataset.location,options,"DESC",boardlimit.value,enabled).then((result=>{result&&(0,_toast.add)((0,_str.get_string)("settingupdated","block_stash"),{type:"info",autohide:!0,closeButton:!0})}))}))})),document.querySelectorAll(".block_stash_change_element").forEach((limit=>{limit.addEventListener("change",(e=>{let otherthing=e.currentTarget.parentNode.parentNode.parentNode.querySelector(".block_stash-leaderboard"),rowlimit=otherthing.parentNode.parentNode.querySelector(".block_stash-leaderboard-limit");const options=otherthing.parentNode.parentNode.querySelector('input[type="hidden"]').dataset.options;updateLeaderboard(otherthing.dataset.courseid,otherthing.dataset.location,options,"DESC",rowlimit.value,!0).then((result=>{result&&(0,_toast.add)((0,_str.get_string)("settingupdated","block_stash"),{type:"info",autohide:!0,closeButton:!0})}))}))}))};const updateSetting=(courseid,key,value)=>_ajax.default.call([{methodname:"block_stash_leaderboard_settings",args:{courseid:courseid,key:key,value:value}}])[0],updateLeaderboard=(courseid,title,options,sortorder,limit,enabled)=>_ajax.default.call([{methodname:"block_stash_leaderboard_update",args:{courseid:courseid,boardname:title,options:options,sortorder:sortorder,rowlimit:limit,enabled:enabled}}])[0]}));

//# sourceMappingURL=settings.min.js.map