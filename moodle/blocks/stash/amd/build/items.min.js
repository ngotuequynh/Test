define("block_stash/items",["exports","block_stash/item","block_stash/drop","core/modal_factory","core/modal_events","core/templates","block_stash/drop-snippet-maker","block_stash/drop-snippet-shortcode-maker"],(function(_exports,_item,_drop,_modal_factory,_modal_events,_templates,_dropSnippetMaker,_dropSnippetShortcodeMaker){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * JS for the items.php page.
   *
   * @copyright  2023 Adrian Greeve <adriangreeve.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_item=_interopRequireDefault(_item),_drop=_interopRequireDefault(_drop),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_dropSnippetMaker=_interopRequireDefault(_dropSnippetMaker),_dropSnippetShortcodeMaker=_interopRequireDefault(_dropSnippetShortcodeMaker);const buildModal=async(drop,altsnippetmaker,warnings)=>{let context={drop:drop.getData(),dropjson:JSON.stringify(drop.getData()),item:drop.getItem().getData(),itemjson:JSON.stringify(drop.getItem().getData()),altsnippetmaker:altsnippetmaker,warnings:warnings,haswarnings:warnings&&warnings.length};if("block_stash//drop-snippet-shortcode-maker"==altsnippetmaker){let dropsnippetmaker=new _dropSnippetShortcodeMaker.default(drop);context.snippet=dropsnippetmaker.getSnippet()}else{let dropsnippetmaker=new _dropSnippetMaker.default(drop);context.snippet=dropsnippetmaker.getSnippet()}return _modal_factory.default.create({title:drop.get("name"),body:_templates.default.render("block_stash/drop_snippet_dialogue",context),type:_modal_factory.default.types.CANCEL})},displayModal=async modal=>{modal.getRoot().on(_modal_events.default.hidden,(()=>{modal.destroy()})),modal.show()};_exports.init=(altsnippetmaker,warnings)=>{document.querySelectorAll("table.itemstable [rel=block-stash-drop]").forEach((tablenode=>{tablenode.addEventListener("click",(e=>{(async(e,altsnippetmaker,warnings)=>{let node=e.currentTarget,item=new _item.default(JSON.parse(node.dataset.item)),drop=new _drop.default(JSON.parse(node.dataset.json),item);const modal=await buildModal(drop,altsnippetmaker,warnings);displayModal(modal)})(e,altsnippetmaker,warnings)}))}))}}));

//# sourceMappingURL=items.min.js.map