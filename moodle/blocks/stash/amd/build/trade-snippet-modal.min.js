define("block_stash/trade-snippet-modal",["exports","core/modal_factory","core/modal_events","core/templates","core/ajax","block_stash/trade-snippet-shortcode-maker"],(function(_exports,_modal_factory,_modal_events,_templates,_ajax,_tradeSnippetShortcodeMaker){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Snippet modal
   *
   * @copyright  2023 Adrian Greeve <adriangreeve.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_tradeSnippetShortcodeMaker=_interopRequireDefault(_tradeSnippetShortcodeMaker);const buildModal=async trade=>{let context={trade:trade.getData()};window.console.log(context.trade),context.tradeitems=await getTradeItems(trade);let tradesnippetmaker=new _tradeSnippetShortcodeMaker.default(trade);return context.snippet=tradesnippetmaker.getSnippet(),_modal_factory.default.create({title:context.trade.name,body:_templates.default.render("block_stash/trade_snippet_dialogue",context),type:_modal_factory.default.types.CANCEL})},displayModal=async modal=>{modal.getRoot().on(_modal_events.default.hidden,(()=>{modal.destroy()})),modal.show()},getTradeItems=trade=>_ajax.default.call([{methodname:"block_stash_get_trade_items",args:{tradeid:trade.get("id")}}])[0];_exports.init=trade=>{(async trade=>{const modal=await buildModal(trade);displayModal(modal)})(trade)}}));

//# sourceMappingURL=trade-snippet-modal.min.js.map