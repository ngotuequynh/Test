define("block_stash/add-item",["exports","core/templates"],(function(_exports,_templates){var obj;
/**
   * Add items to a table.
   *
   * @copyright 2019 Adrian Greeve <adriangreeve.com>
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let useritems=[];const addItem=e=>{e.preventDefault();let selectedtype=e.currentTarget.getAttribute("data-add-item"),selectedobject=document.getElementById(selectedtype),optionelement=selectedobject.options[selectedobject.selectedIndex],context={id:optionelement.getAttribute("data-itemid"),itemid:optionelement.getAttribute("data-itemid"),name:optionelement.innerText,imageurl:optionelement.getAttribute("data-imgurl"),useritemid:optionelement.value,quantity:optionelement.getAttribute("data-amount"),selecttype:selectedtype};setItem(context)},setItem=context=>{let tableelement=document.querySelector('table[data-type="'+context.selecttype+'"]');_templates.default.render("block_stash/add_item_detail",context).then(((html,js)=>{"empty"==tableelement.getAttribute("data-status")?(_templates.default.replaceNodeContents(tableelement,html,js),tableelement.setAttribute("data-status","thing")):_templates.default.appendNodeContents(tableelement,html,js),registerItemElementEvents()}))},registerItemElementEvents=()=>{document.getElementsByClassName("block-stash-delete-item").forEach((deleteButton=>{deleteButton.addEventListener("click",deleteItem)}))},deleteItem=e=>{e.currentTarget.parentNode.parentNode.remove()};_exports.init=()=>{(()=>{let selectelement=document.getElementById("your-items");for(let cnode of selectelement.options){let itemid=cnode.dataset.itemid;useritems[itemid]={id:itemid,itemid:itemid,name:cnode.innerText,imageurl:cnode.dataset.imgurl,useritemid:cnode.value,quantity:cnode.dataset.amount,selecttype:"your-items"}}})();let formelement=document.querySelector("form");if(formelement.hasAttribute("data-itemid")){let itemid=formelement.dataset.itemid;setItem(useritems[itemid])}document.querySelectorAll("[data-add-item]").forEach((addbutton=>{addbutton.addEventListener("click",addItem)}))}}));

//# sourceMappingURL=add-item.min.js.map